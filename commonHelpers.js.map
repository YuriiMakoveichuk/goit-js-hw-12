{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '44363608-aeb5e859d1804b8d255aa00c3',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n});\n\nexport async function userRequest(userSearch, newPage) {\n  try {\n    const res = await axios.get('', {\n      params: { q: userSearch, page: newPage },\n    });\n    return res.data;\n  } catch (err) {\n    console.log('server error', err);\n  }\n}\n","function galleryTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return ` <li class=\"album-item\">\n            <a class=\"album-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"album-img\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n            />\n            <ul class=\"statistics-list\">\n              <li class=\"statistics-item text-marg-1\">\n                <p class=\"statistics-text\">Likes</p>\n                <p>${likes}</p>\n              </li>\n              <li class=\"statistics-item text-marg-2\">\n                <p class=\"statistics-text\">Views</p>\n                <p>${views}</p>\n              </li>\n              <li class=\"statistics-item text-marg-3\">\n                <p class=\"statistics-text\">Comments</p>\n                <p>${comments}</p>\n              </li>\n              <li class=\"statistics-item\">\n                <p class=\"statistics-text\">Downloads</p>\n                <p>${downloads}</p>\n              </li>\n            </ul>\n            </a>\n          </li>`;\n}\nexport function galleriesTemplate(arr) {\n  return arr.map(galleryTemplate).join('\\n');\n}\n","import { userRequest } from './js/pixabay-api.js';\nimport { galleriesTemplate } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.js-form');\nconst ulElem = document.querySelector('.js-album-list');\nconst loader = document.querySelector('.js-loader');\nconst btnElem = document.querySelector('.js-form-btn');\nconst album = new SimpleLightbox('.album-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet userSearch;\nlet newPage;\nlet maxPage;\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n  ulElem.innerHTML = '';\n  userSearch = e.target.elements.text.value.trim();\n  newPage = 1;\n  btnHideLoadMore();\n  if (userSearch !== '') {\n    showLoader();\n    try {\n      btnHideLoadMore();\n      const data = await userRequest(userSearch, newPage);\n      maxPage = Math.ceil(data.totalHits / data.hits.length);\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          timeout: 2000,\n        });\n      } else {\n        ulElem.innerHTML = galleriesTemplate(data.hits);\n        album.refresh();\n        updateBtnLoadMore();\n      }\n    } catch (err) {\n      console.log(err);\n    }\n    hideLoader();\n  } else {\n    btnHideLoadMore();\n  }\n\n  searchForm.reset();\n});\n\nbtnElem.addEventListener('click', async () => {\n  showLoader();\n  newPage += 1;\n  btnHideLoadMore();\n  try {\n    const data = await userRequest(userSearch, newPage);\n    ulElem.insertAdjacentHTML('beforeend', galleriesTemplate(data.hits));\n    scrollPage();\n  } catch (err) {\n    console.log(err);\n  }\n  hideLoader();\n  updateBtnLoadMore();\n});\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction updateBtnLoadMore() {\n  if (newPage < maxPage) {\n    btnShowLoadMore();\n  } else {\n    btnHideLoadMore();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      timeout: 3000,\n    });\n  }\n}\n\nfunction btnShowLoadMore() {\n  btnElem.classList.remove('btn-hidden');\n}\n\nfunction btnHideLoadMore() {\n  btnElem.classList.add('btn-hidden');\n}\n\nfunction scrollPage() {\n  const liElem = ulElem.children[0];\n  const heightCart = liElem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: heightCart * 3,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","Axios","userRequest","userSearch","newPage","err","galleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleriesTemplate","arr","searchForm","ulElem","loader","btnElem","album","SimpleLightbox","maxPage","e","btnHideLoadMore","showLoader","data","iziToast","updateBtnLoadMore","hideLoader","scrollPage","btnShowLoadMore","heightCart"],"mappings":"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"}